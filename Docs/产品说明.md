# 智能日程助手 - 产品说明文档

> Hackathon 2026 · Hamburg

---

## 📋 产品概述

### 一句话描述
**从任意输入中智能提取日程信息，一键生成可导入的日历文件。**

### 核心价值
用户经常收到包含日程信息的内容（活动海报、会议截图、语音消息、聊天记录），但手动录入日历繁琐且容易出错。本产品利用 LLM 多模态能力，自动识别并提取日程，生成标准 ICS 文件，让日程管理更智能、更高效。

### 支持的输入类型
- 📝 文字（复制粘贴、手动输入）
- 🖼️ 图片（截图、海报、照片）
- 🎤 语音（录音、语音消息）
- 💬 平台消息（WhatsApp、Claude Bot）

### 输出形式
- 📅 ICS 日历文件（标准格式，支持所有主流日历应用）
- 🖼️ 可视化邀请图片
- 📋 邀请信息文本（方便分享）
- 🔊 背景介绍语音（针对特定活动如音乐会）

---

## 🎯 功能优先级

### ⭐⭐⭐ P0 - 核心 MVP（必须完成）
> 这是最小可交付产品，确保有一个完整可演示的核心流程
>
> **开发方式：使用 Cursor / Claude Code 辅助生成代码**

| 功能 | 描述 |
|------|------|
| 文字输入识别 | 用户输入文字 → LLM 提取日程 |
| 图片输入识别 | 支持上传图片 + 附加文字补充说明，Vision API 提取 |
| 日程信息结构化 | 提取：标题、时间、地点、描述 |
| 用户局部修改 | 识别后允许用户修改：直接输入 / 日期选择器 / 语音输入自动填入 |
| ICS 文件生成 | 生成标准 iCalendar 格式文件 |
| 多 LLM 支持 | 支持 OpenAI / Gemini / Claude |
| 用户自带 API Key | 前端直连 LLM，无需后台（确保纯前端可独立运行） |
| 客户端展示与下载 | 预览日程 + 下载 ICS 按钮 |
| 基础 UI | Flutter 简洁界面（三端适配） |

---

### ⭐⭐ P1 - 增强功能（优先完成）
> 提升产品完整度和用户体验

| 功能 | 描述 |
|------|------|
| 多条日程识别 | 一次输入识别多个日程事件，批量处理 |
| 用户登录功能 | 账号登录 → 通过后台代理调用 LLM（无需用户自带 Key） |
| 语音输入 | 录音 → STT 转文字 → LLM 提取日程 |

---

### ⭐ P2 - 扩展功能（时间允许再做）
> 差异化亮点，提升竞争力

| 功能 | 描述 |
|------|------|
| 智能地址补全 | 模糊地址（如"XX附近的图书馆"）→ 查询具体门牌地址 |
| 图片元信息提取 | 当缺少地址/时间时，从照片 EXIF 元数据提取参考信息（拍摄时间、GPS位置） |
| 邀请图片生成 | 根据日程自动生成精美邀请图 |
| 背景介绍生成 | 音乐会等活动自动生成背景信息 |
| TTS 朗读 | 背景介绍语音版（ElevenLabs） |
| Discord 集成 | 通过 Discord Bot 接收消息并提取日程 |

---

### 💫 P3 - 未来愿景（Hackathon 后）
> 记录但不在本次实现

| 功能 | 描述 |
|------|------|
| WhatsApp 集成 | 通过 WhatsApp Bot 直接接收消息 |
| Claude Bot 集成 | 对话式日程管理 |
| 团队日历同步 | 多人协作日程 |
| 智能提醒 | 基于日程类型的个性化提醒 |
| 日历平台直连 | 一键同步到 Google Calendar / Outlook |

---

## 🏗️ 技术架构

### 整体架构图

```
┌─────────────────────────────────────────────────────────────┐
│                      用户输入层                              │
│  ┌─────────┐  ┌─────────┐  ┌─────────┐  ┌─────────────────┐ │
│  │  文字   │  │  图片   │  │  语音   │  │ WhatsApp/Bot    │ │
│  └────┬────┘  └────┬────┘  └────┬────┘  └───────┬─────────┘ │
└───────┼────────────┼────────────┼───────────────┼───────────┘
        │            │            │               │
        ▼            ▼            ▼               ▼
┌─────────────────────────────────────────────────────────────┐
│                   Flutter 客户端                             │
│                  (iOS / Android / Web)                       │
│  ┌──────────────────────────────────────────────────────┐   │
│  │  • 输入处理  • 预览展示  • 用户确认  • 文件下载     │   │
│  └──────────────────────────────────────────────────────┘   │
└─────────────────────────┬───────────────────────────────────┘
                          │
          ┌───────────────┴───────────────┐
          ▼                               ▼
┌──────────────────┐            ┌──────────────────┐
│  直连模式 [P0]   │            │  后台代理模式 [P1] │
│  (用户自带Key)   │            │  (用户登录)       │
│                  │            │                  │
│  Flutter →       │            │  Flutter →       │
│  原生 LLM API    │            │  后台穿透接口     │
│                  │            │  (格式同原生API)  │
│  ⚡ 纯前端可运行  │            │                  │
│                  │            │  前端只需改       │
│                  │            │  base URL 即可   │
└────────┬─────────┘            └────────┬─────────┘
         │                               │
         │                               ▼
         │                    ┌──────────────────────┐
         │                    │   Python 后台        │
         │                    │   (FastAPI)          │
         │                    │                      │
         │                    │  ┌────────────────┐  │
         │                    │  │ LLM 穿透接口   │  │
         │                    │  │ 接口格式与原生  │  │
         │                    │  │ LLM API 一致   │  │
         │                    │  └───────┬────────┘  │
         │                    │          │          │
         │                    │  ┌───────▼────────┐  │
         │                    │  │ Whisper (STT)  │  │
         │                    │  │ ElevenLabs TTS │  │
         │                    │  │ ICS Generator  │  │
         │                    │  └────────────────┘  │
         │                    └──────────┬───────────┘
         │                               │
         ▼                               ▼
┌─────────────────────────────────────────────────────────────┐
│                       LLM 服务层                             │
│   ┌─────────┐      ┌─────────┐      ┌─────────┐            │
│   │ OpenAI  │      │ Gemini  │      │ Claude  │            │
│   └─────────┘      └─────────┘      └─────────┘            │
└─────────────────────────────────────────────────────────────┘
```

### 技术栈详情

| 层级 | 技术选型 | 说明 |
|------|----------|------|
| **前端** | Flutter | 一套代码，三端运行（iOS/Android/Web） |
| **后台** | Python + FastAPI | 异步、高性能、自动 API 文档 |
| **LLM 穿透接口** | 后台自建 | 接口格式与原生 LLM API 一致，前端切换只需改 base URL |
| **语音转文字** | OpenAI Whisper API | 高准确率 STT |
| **文字转语音** | ElevenLabs | 自然语音生成 |
| **ICS 生成** | 前端 Dart 实现 | 标准日历格式，纯前端生成 |
| **用户认证** | Supabase Auth | 和 Flutter 良好集成 |
| **数据库** | Supabase (PostgreSQL) | 用户数据、使用记录 |
| **前端部署** | Vercel | Web 版本托管 |
| **后台部署** | Railway / Render | Python 服务托管 |
| **代码管理** | GitHub | 版本控制 |

### 🔑 关键设计：双轨模式切换

```
前端切换直连/后台模式，只需修改 base URL：

直连模式（P0）：
  https://api.openai.com/v1/chat/completions
  https://generativelanguage.googleapis.com/v1beta/...
  https://api.anthropic.com/v1/messages

后台模式（P1）：
  https://your-backend.com/v1/chat/completions
  （接口参数格式与原生完全一致）

✅ 前端代码几乎不变，只改 endpoint
✅ 后台做穿透代理，保持接口格式一致
```

---

## 📱 核心用户流程

### 主流程

```
1. 用户输入
   ├── 粘贴文字
   ├── 上传图片 + 可选文字补充说明
   └── 录制语音（P1）
        ↓
2. AI 处理
   ├── [图片] Vision API 识别 + EXIF 元数据提取（P2）
   ├── [语音] STT 转文字（P1）
   ├── [文字] LLM 提取日程信息
   └── [地址] 模糊地址 → 智能查询具体门牌（P2）
        ↓
3. 用户确认与修改
   ├── 展示提取结果
   ├── 局部修改方式：
   │   ├── 直接输入
   │   ├── 日期/时间选择器
   │   └── 语音描述 → 自动填入
   └── 确认生成
        ↓
4. 生成输出
   ├── ICS 文件
   ├── 邀请图片（P2）
   └── 背景介绍 + TTS 朗读（P2）
        ↓
5. 用户操作
   ├── 下载 ICS
   ├── 保存图片
   └── 播放/阅读背景介绍
```

### 日程数据结构

```json
{
  "events": [
    {
      "title": "汉堡爱乐乐团音乐会",
      "start_time": "2026-02-15T19:30:00+01:00",
      "end_time": "2026-02-15T22:00:00+01:00",
      "location": "Elbphilharmonie, Platz der Deutschen Einheit 1, Hamburg",
      "description": "贝多芬第九交响曲",
      "url": "https://example.com/event",
      "reminder": 60,
      "background_info": "汉堡爱乐乐团成立于1828年..."
    }
  ]
}
```

---

## 🚀 开发计划建议

### 开发阶段（使用 Cursor / Claude Code）

```
阶段 1：环境搭建
├── Flutter 项目初始化
├── FastAPI 后台框架
└── GitHub 仓库 + Vercel 部署

阶段 2：P0 核心功能
├── 输入模块（文字 + 图片 + 补充说明）
├── 用户自带 API Key + 前端直连 LLM
├── LLM 日程提取（多模型支持）
├── 用户修改界面（输入/选择器/语音填入）
├── ICS 生成与下载
└── 端到端流程打通（纯前端可独立运行）

阶段 3：P1 增强功能
├── 多条日程批量识别
├── 用户登录 + 后台代理调用
└── 语音输入

阶段 4：P2 扩展 + 收尾
├── 智能地址补全 / EXIF 元数据提取（按时间选做）
├── 邀请图片 / 背景介绍 / TTS / Discord（按时间选做）
├── Bug 修复 & UI 美化
└── 演示准备
```

### 灵活裁剪策略

| 进度状态 | 建议策略 |
|----------|----------|
| 时间紧张 | 精简 P0：文字输入 + 单 LLM + 自带 Key + ICS 生成（纯前端可跑） |
| 正常进度 | 完整 P0：文字 + 图片 + 多 LLM + 用户修改 + 自带 Key |
| 进度顺利 | P0 + P1：多条日程、用户登录 + 后台、语音输入 |
| 时间充裕 | P0 + P1 + P2：地址补全、EXIF 提取、邀请图片、背景介绍、TTS、Discord |

---

## 🎨 界面设计要点

### 输入页
- 文字输入框（支持粘贴）
- 图片上传区 + 补充说明输入框
- 录音按钮（P1）
- LLM 选择（下拉菜单：OpenAI / Gemini / Claude）
- API Key 输入（可选，折叠显示）

### 结果编辑页
- 日程卡片式展示
- 每个字段可点击编辑：
  - **标题**：直接输入
  - **日期**：日期选择器 或 语音输入
  - **时间**：时间选择器 或 语音输入
  - **地点**：输入框 + 智能补全建议 或 语音输入
  - **描述**：文本输入
- 🎤 语音修改按钮（点击后说话，自动识别并填入对应字段）
- 地址智能提示（模糊地址 → 显示具体门牌建议）（P2）

### 操作按钮组
- 📥 下载 ICS
- 🖼️ 生成邀请图（P2）
- 📋 复制邀请文本
- 🔊 播放背景介绍（P2）

---

## 💡 差异化亮点

1. **纯前端可运行** — 用户自带 API Key 即可使用，无需后台依赖
2. **多模态输入** — 文字、图片（+补充说明）、语音（P1），一个入口搞定
3. **多 LLM 支持** — 用户可选择 OpenAI/Gemini/Claude
4. **灵活的修改方式** — 识别后可直接输入、选择器选择、或语音描述自动填入
5. **双轨模式** — 自带 Key 直连（P0） + 登录后台代理（P1），灵活选择
6. **智能地址补全** — 模糊描述（如"XX附近的图书馆"）→ 自动查询具体门牌（P2）
7. **图片元数据利用** — 缺少信息时，从照片 EXIF 提取拍摄时间、GPS 位置作为参考（P2）
8. **背景介绍 + 朗读** — 不只是冷冰冰的日程，还有丰富上下文（P2）
9. **一键生成邀请** — 社交分享友好（P2）

---

## 📎 附录

### 相关账号清单

| 工具 | 状态 | 用途 |
|------|------|------|
| Vercel | ✅ 已有 | Web 部署 |
| Cursor | ✅ 已有 | 代码开发 |
| v0 | ✅ 已申请 | UI 原型 |
| ElevenLabs | ✅ 已申请 | TTS 语音 |
| OpenAI | ✅ 已申请 | LLM |
| Gemini | ✅ 已申请 | LLM |
| LangChain | ⏳ 待申请 | LLM 框架 |
| n8n | ⏳ 待申请 | 工作流 |

### 参考资源
- [iCalendar 规范](https://icalendar.org/)
- [LiteLLM 文档](https://docs.litellm.ai/)
- [Flutter 官方文档](https://flutter.dev/)
- [FastAPI 官方文档](https://fastapi.tiangolo.com/)

---

*文档版本：v1.0*
*最后更新：2026-01-31*
